<!DOCTYPE html>
<html>
<head>
  <title>Change User Password</title>
</head>
<body>
<%- include('../partials/header') %>
<section class="sectionmin">
  <h1  class="mainheading">Change User Password</h1>
  <p class="maintext">
    Use the form below to change your password. Make sure to remember your new password!
  </p>
  <form class="formpart"  id="formpart" action="/users/password-change" method="post">
    <% if (error && typeof error === 'string') { %>
      <aside class="errormessage"><%= error %></aside>
    <% } %>
    <% if (success) { %>
      <aside class="successmessage">
        <%= success %>
      </aside>
      <script>
        setTimeout(() => {
          window.location.href = '/users/dashboard';
        }, 2000); 
      </script>
    <% } %>
  
  <div>
    <label>Old Password:</label>
    <input type="text" name="oldpassword" value="<%= data.oldpassword || '' %>" />
    <% if (error && error.oldpassword) { %>
      <span class="error"><%= error.oldpassword %></span>
    <% } %>
  </div>
  <div>
    <label>New Password:</label>
    <input type="text" name="password" value="<%= data.password || '' %>" />
    <% if (error && error.password) { %>
      <span class="error"><%= error.password %></span>
    <% } %>
  </div>
  <div>
    <label>Confirm Password:</label>
    <input type="text" name="confirmpassword" value="<%= data.confirmpassword || '' %>" />
    <% if (error && error.confirmpassword) { %>
      <span class="error"><%= error.confirmpassword %></span>
    <% } %>
  </div>

  <%- include('../partials/button', { text: 'Change' }) %>
</form>

</section>
<%- include('../partials/footer', { title: 'EMP Management System' }) %>
</body>
</html>
